<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Space Site</title>
  <link rel="stylesheet" href="main.css">
</head>
<body>

  <header>
    <img id="logo" src="Foto/AASA logo 2.png" alt="Space Logo">
  </header>

  <div class="container">
    <button class="btn" onclick="uitklappen();"  id="spintest">Uitklappen</button>
    <button class="btn" onclick="inklappen();">Inklappen</button>
    <br>
    <button class="btn" onclick="test();">voeg data toe</button>
  </div>

  <div class="container">
    <table id="data table">
      <tr>
        <th></th>
        <th colspan="2">Batterij</th>
        <th colspan="2">Zonnepanelen</th>
      </tr>
      <tr>
        <th>Tijd</th>
        <th>Stroom</th>
        <th>Spanning</th>
        <th>Stroom</th>
        <th>Spanning</th>
      </tr>
      <tr>
        <td>tijd</td>
        <td id="BaSt">0,04 A</td>
        <td id="BaSp">5 V</td>
        <td id="BaSt">0,04 A</td>
        <td id="BaSp">5 V</td>
      </tr>
      <tr></tr> <tr></tr> <tr></tr> <tr></tr> <tr></tr> <tr></tr> <tr></tr>
    </table>
  </div>

  <div class="container">
    <h2>Countdown naar de volgende ruimtemissie</h2>
    <div id="countdown"></div>
  </div>
  
  <div class="container">
    <h2>Laatste Ruimte Nieuws</h2>
    <ul id="news-feed"></ul>
    <button onclick="artikel()" class="btn">Schrijf artikel! (Niet vaker dan 10 keer per minuut want dan krijg ik problemen met de api en duurt zo 5-10 seconden)</button>
    <h2>artikel over deze gebeurtenis:</h2>
    <p id="artikel"></p>
  </div>

  <script>
    // Countdown timer
    var countDownDate = new Date("Jun 12, 2024 00:00:00").getTime();


    var x = setInterval(function() {
      var now = new Date().getTime();
      var distance = countDownDate - now;
      var days = Math.floor(distance / (1000 * 60 * 60 * 24));
      var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((distance % (1000 * 60)) / 1000);
      document.getElementById("countdown").innerHTML = days + "d " + hours + "h "
      + minutes + "m " + seconds + "s ";
      if (distance < 0) {
        clearInterval(x);
        document.getElementById("countdown").innerHTML = "EXPIRED";
      }
    }, 1000);

    // Ruimtenieuwsfeed
    var newsFeed = document.getElementById("news-feed");
    var newsItems = [
      "NASA kondigt plannen aan voor AASA Maanlander-missie",
      "Europese ruimtevaartorganisatie lanceert nieuwe satelliet voor aarde observatie",
      "Ruimtetoerisme bedrijf AAAD onthult plannen voor de maanlander"
    ];

    newsItems.forEach(function(item) {
      var li = document.createElement("li");
      li.textContent = item;
      newsFeed.appendChild(li);
    });

    function uitklappen() {
      console.log("hallo ik doe de uit klap");
    }

    function inklappen() {
      console.log("hoi ik doe de inklap");
    }

    function artikel() {

      document.getElementById('artikel').innerHTML = "Aan het schrijven... Heb geduld!"
      const AWANLLM_API_KEY = "3f8b5e11-562c-41a5-aaa8-03e48eb52ade"; // Replace "your_api_key_here" with your actual API key

      fetch("https://api.awanllm.com/v1/chat/completions", {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${AWANLLM_API_KEY}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          "model": "Meta-Llama-3-8B-Instruct",
          "messages": [
            {"role": "user", "content": "antwoord in het nederlands. Schrijf een nepartikel over hoe de Avans Academie Associate Degree informatica en Engeniering samen een maanlander hebben gemaakt die op 12 juni op de maan gaat landen."}
          ]
        })
      })
      .then(response => response.json())
      .then(data => {
        console.log(data.choices[0].message.content); // You can handle the response data here
        document.getElementById("artikel").innerHTML = data.choices[0].message.content;
      })
      .catch(error => {
        console.error('Error:', error);
      });

    }
    function test() {
      setSpanningStroom2(Math.round((Math.random() * 5.0) * 10) / 10, Math.round((Math.random() * 0.1) * 1000) / 1000, 
                         Math.round((Math.random() * 5.0) * 10) / 10, Math.round((Math.random() * 0.1) * 1000) / 1000);

      const button = document.getElementById('spintest');
      button.classList.add('spin');

      // Remove the 'spin' class after the animation completes
      setTimeout(() => {
        button.classList.remove('spin');
      }, 1000);

    }
    // function setSpanningStroom(BaSp, BaSt, ZoSp, ZoSt) {
    //   document.getElementById("BaSp").innerHTML = BaSp.toString();

    // }

    function setSpanningStroom2(BaSp, BaSt, ZoSp, ZoSt) {
    var table = document.getElementById("data table");

    var lastRow = table.rows[table.rows.length - 1];
    table.deleteRow(lastRow.rowIndex);
    

    var rows = table.getElementsByTagName("tr");
    for (var i = 2; i < rows.length; i++) { 
        rows[i].classList.add("oud");
    }

    var newRow = table.insertRow(2); 

    var TijdCell = newRow.insertCell(0);
    var BaStroomCell = newRow.insertCell(1);
    var BaSpanningCell = newRow.insertCell(2);
    var ZoStroomCell = newRow.insertCell(3);
    var ZoSpanningCell = newRow.insertCell(4);

    var d = new Date();

    TijdCell.innerHTML = d.toLocaleString(); 
    BaStroomCell.innerHTML = BaSt.toString() + " A";
    BaSpanningCell.innerHTML = BaSp.toString() + " V";
    ZoStroomCell.innerHTML = ZoSt.toString() + " A";
    ZoSpanningCell.innerHTML = ZoSp.toString() + " V";
}

  </script>

</body>
</html>